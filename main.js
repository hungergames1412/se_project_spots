(()=>{"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=(e,t,o)=>{const r=e.querySelector(`#${t.id}-error`);r.textContent="",t.classList.remove(o.inputErrorClass),r.classList.remove(o.errorClass)},r=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?((e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)})(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},n=(e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);n.forEach(r=>o(e,r,t)),r(n,a,t)},a=e+"ce1b93020621958c5ad4.svg",c=e+"2fc47fd8e9a9bcd9612f.jpg",s=e+"48e2eaf47f62e20f860c.svg",l=e+"975792ea68af0a3c209d.svg",i=e+"681e9a719890c3953022.svg",d=e+"dca24871e7231aee2fa2.svg";document.querySelector(".header__logo").src=a,document.querySelector(".profile__avatar").src=c,document.querySelector(".profile__edit-btn img").src=s,document.querySelector(".profile__add-btn img").src=l;const u=document.querySelector(".cards__list"),m=document.querySelector("#card-template"),p=document.querySelector("#edit-profile-modal"),_=document.querySelector("#new-post-modal"),f=document.querySelector("#preview-modal"),y=document.querySelector(".profile__edit-btn"),v=p.querySelector(".modal__close-btn"),S=p.querySelector(".modal__form"),g=p.querySelector("#profile-name-input"),q=p.querySelector("#profile-description-input"),b=document.querySelector(".profile__add-btn"),w=_.querySelector(".modal__close-btn"),h=_.querySelector(".modal__form"),k=_.querySelector("#new-post-link"),L=_.querySelector("#new-post-caption"),E=f.querySelector(".modal__close-btn_type_preview");function C(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",z)}function x(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",z)}function z(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&x(e)}}function j(e){const t=m.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__image"),r=t.querySelector(".card__title"),n=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return o.src=e.link,o.alt=e.name,r.textContent=e.name,n.style.backgroundImage=`url(${d})`,n.addEventListener("click",()=>{n.classList.toggle("card__like-button_active")}),a.style.backgroundImage=`url(${i})`,a.addEventListener("click",()=>t.remove()),o.addEventListener("click",()=>{const t=f.querySelector(".modal__image"),o=f.querySelector(".modal__caption");t.src=e.link,t.alt=e.name,o.textContent=e.name,C(f)}),t}var A;document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("mousedown",o=>{if(o.target.classList.contains("modal")){x(e);const o=e.querySelector(".modal__form");o&&n(o,t)}})}),y.addEventListener("click",()=>{g.value=document.querySelector(".profile__name").textContent,q.value=document.querySelector(".profile__description").textContent,C(p)}),v.addEventListener("click",()=>{x(p),n(S,t)}),S.addEventListener("submit",e=>{e.preventDefault(),document.querySelector(".profile__name").textContent=g.value,document.querySelector(".profile__description").textContent=q.value,x(p),n(S,t)}),b.addEventListener("click",()=>C(_)),w.addEventListener("click",()=>{x(_),n(h,t)}),h.addEventListener("submit",e=>{e.preventDefault();const o=j({name:L.value,link:k.value});u.prepend(o),h.reset(),x(_),n(h,t)}),E.addEventListener("click",()=>x(f)),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(e=>{const t=j(e);u.append(t)}),A=t,document.querySelectorAll(A.formSelector).forEach(e=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);r(n,a,t),n.forEach(c=>{c.addEventListener("input",()=>{((e,t,r)=>{t.validity.valid?o(e,t,r):((e,t,o,r)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent=o,t.classList.add(r.inputErrorClass),n.classList.add(r.errorClass)})(e,t,t.validationMessage,r)})(e,c,t),r(n,a,t)})})})(e,A)})})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxFQUFTVCxLQUM3Q1MsRUFBUVksU0FBU0MsTUFHcEJmLEVBQWVDLEVBQVFDLEVBQVNULEdBcEJOZ0csRUFBQ3hGLEVBQVFDLEVBQVN3RixFQUFVakcsS0FDeEQsTUFBTVUsRUFBYUYsRUFBT0csY0FBYyxJQUFJRixFQUFRRyxZQUNwREYsRUFBV0csWUFBY29GLEVBQ3pCeEYsRUFBUUssVUFBVVksSUFBSTFCLEVBQVNLLGlCQUMvQkssRUFBV0ksVUFBVVksSUFBSTFCLEVBQVNNLGFBY2hDMEYsQ0FBZXhGLEVBQVFDLEVBQVNBLEVBQVF5RixrQkFBbUJsRyxJQTRDekQrRixDQUFtQnZGLEVBQVFzRixFQUFjWCxHQUN6Q25FLEVBQWtCQyxFQUFXYyxFQUFlb0QsUUFTOUNVLENBQWtCckYsRUFBUTJFLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zcG90cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zcG90cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLy8gVmFsaWRhdGlvbiBzZXR0aW5nc1xyXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8vIFNob3cgaW5wdXQgZXJyb3JcclxuZXhwb3J0IGNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNc2csIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBlcnJvck1zZztcclxuICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICBlcnJvck1zZ0VsLmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG4vLyBIaWRlIGlucHV0IGVycm9yXHJcbmV4cG9ydCBjb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIHNldHRpbmdzKSA9PiB7XHJcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yTXNnRWwuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5lcnJvckNsYXNzKTtcclxufTtcclxuXHJcbi8vIENoZWNrIGlucHV0IHZhbGlkaXR5XHJcbmV4cG9ydCBjb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBzZXR0aW5ncykgPT4ge1xyXG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlLCBzZXR0aW5ncyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgc2V0dGluZ3MpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIENoZWNrIGZvciBpbnZhbGlkIGlucHV0c1xyXG5leHBvcnQgY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xyXG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcbn07XHJcblxyXG4vLyBEaXNhYmxlIHN1Ym1pdCBidXR0b25cclxuZXhwb3J0IGNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWwsIHNldHRpbmdzKSA9PiB7XHJcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbn07XHJcblxyXG4vLyBUb2dnbGUgYnV0dG9uIHN0YXRlIChlbmFibGUvZGlzYWJsZSlcclxuZXhwb3J0IGNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIHNldHRpbmdzKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBzZXR0aW5ncyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBidXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIFJlc2V0IHZhbGlkYXRpb24gKGNsZWFyIGVycm9ycyBhbmQgZGlzYWJsZSBidXR0b24pXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBzZXR0aW5ncykgPT4ge1xyXG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0LCBzZXR0aW5ncykpO1xyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgc2V0dGluZ3MpO1xyXG59O1xyXG5cclxuLy8gU2V0IGV2ZW50IGxpc3RlbmVycyBmb3IgZm9ybSBmaWVsZHNcclxuZXhwb3J0IGNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsLCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8gRW5hYmxlIGZvcm0gdmFsaWRhdGlvblxyXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWwsIGNvbmZpZyk7XHJcbiAgfSk7XHJcbn07XHJcbiIsIi8vIEltcG9ydCBtYWluIENTU1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSW1wb3J0IHZhbGlkYXRpb24gbW9kdWxlXHJcbmltcG9ydCB7XHJcbiAgZW5hYmxlVmFsaWRhdGlvbixcclxuICBzZXR0aW5ncyxcclxuICByZXNldFZhbGlkYXRpb24sXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5cclxuLy8gSW1wb3J0IGltYWdlcyB1c2VkIGluIEpTXHJcbmltcG9ydCBsb2dvIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IGF2YXRhciBmcm9tIFwiLi4vaW1hZ2VzL2F2YXRhci5qcGdcIjtcclxuaW1wb3J0IHBlbmNpbCBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcclxuaW1wb3J0IHBsdXMgZnJvbSBcIi4uL2ltYWdlcy9wbHVzLnN2Z1wiO1xyXG5pbXBvcnQgZGVsZXRlSWNvbiBmcm9tIFwiLi4vaW1hZ2VzL2RlbGV0ZS1pY29uLnN2Z1wiO1xyXG5pbXBvcnQgbGlrZUluYWN0aXZlIGZyb20gXCIuLi9pbWFnZXMvbGlrZS1pY29uLnN2Z1wiO1xyXG5pbXBvcnQgbGlrZUFjdGl2ZSBmcm9tIFwiLi4vaW1hZ2VzL2xpa2UtaWNvbi1maWxsZWQuc3ZnXCI7XHJcbmltcG9ydCBjbG9zZSBmcm9tIFwiLi4vaW1hZ2VzL2Nsb3NlLnN2Z1wiO1xyXG5cclxuLy8gQXNzaWduIHN0YXRpYyBpbWFnZXMgdG8gRE9NIGVsZW1lbnRzXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19sb2dvXCIpLnNyYyA9IGxvZ287XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpLnNyYyA9IGF2YXRhcjtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0biBpbWdcIikuc3JjID0gcGVuY2lsO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG4gaW1nXCIpLnNyYyA9IHBsdXM7XHJcblxyXG4vLyBJbml0aWFsIGNhcmRzIGRhdGFcclxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIERPTSBlbGVtZW50c1xyXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XHJcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XHJcbmNvbnN0IGltYWdlUHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZUNsb3NlQnRuID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xyXG5jb25zdCBqb2JJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xyXG5cclxuY29uc3QgbmV3UG9zdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcclxuY29uc3QgbmV3UG9zdEZvcm0gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgbGlua0lucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbGlua1wiKTtcclxuY29uc3QgY2FwdGlvbklucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtY2FwdGlvblwiKTtcclxuXHJcbmNvbnN0IGltYWdlUHJldmlld0Nsb3NlQnRuID0gaW1hZ2VQcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9fY2xvc2UtYnRuX3R5cGVfcHJldmlld1wiXHJcbik7XHJcblxyXG4vLyBPcGVuIG1vZGFsXHJcbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xyXG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9pcy1vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjQ2xvc2UpO1xyXG59XHJcblxyXG4vLyBDbG9zZSBtb2RhbFxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcclxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NDbG9zZSk7XHJcbn1cclxuXHJcbi8vIENsb3NlIG1vZGFsIG9uIFwiRXNjYXBlXCIga2V5XHJcbmZ1bmN0aW9uIGhhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfaXMtb3BlbmVkXCIpO1xyXG4gICAgaWYgKG9wZW5lZE1vZGFsKSBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIENsb3NlIG1vZGFsIG9uIGJhY2tncm91bmQgY2xpY2sgJiByZXNldCB2YWxpZGF0aW9uXHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIikuZm9yRWFjaCgobW9kYWwpID0+IHtcclxuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwobW9kYWwpO1xyXG4gICAgICBjb25zdCBmb3JtID0gbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgICAgaWYgKGZvcm0pIHJlc2V0VmFsaWRhdGlvbihmb3JtLCBzZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gUHJvZmlsZSBFZGl0IE1vZGFsXHJcbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpLnRleHRDb250ZW50O1xyXG4gIGpvYklucHV0LnZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKS50ZXh0Q29udGVudDtcclxuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcbn0pO1xyXG5cclxuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcbiAgcmVzZXRWYWxpZGF0aW9uKHByb2ZpbGVGb3JtLCBzZXR0aW5ncyk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpLnRleHRDb250ZW50ID0gbmFtZUlucHV0LnZhbHVlO1xyXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSBqb2JJbnB1dC52YWx1ZTtcclxuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG4gIHJlc2V0VmFsaWRhdGlvbihwcm9maWxlRm9ybSwgc2V0dGluZ3MpO1xyXG59KTtcclxuXHJcbi8vIE5ldyBQb3N0IE1vZGFsXHJcbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpKTtcclxuXHJcbm5ld1Bvc3RDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcclxuICByZXNldFZhbGlkYXRpb24obmV3UG9zdEZvcm0sIHNldHRpbmdzKTtcclxufSk7XHJcblxyXG5uZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBuZXdDYXJkRGF0YSA9IHsgbmFtZTogY2FwdGlvbklucHV0LnZhbHVlLCBsaW5rOiBsaW5rSW5wdXQudmFsdWUgfTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KG5ld0NhcmREYXRhKTtcclxuICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgbmV3UG9zdEZvcm0ucmVzZXQoKTtcclxuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XHJcbiAgcmVzZXRWYWxpZGF0aW9uKG5ld1Bvc3RGb3JtLCBzZXR0aW5ncyk7XHJcbn0pO1xyXG5cclxuLy8gSW1hZ2UgcHJldmlldyBtb2RhbFxyXG5pbWFnZVByZXZpZXdDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICBjbG9zZU1vZGFsKGltYWdlUHJldmlld01vZGFsKVxyXG4pO1xyXG5cclxuLy8gQ3JlYXRlIGNhcmQgZWxlbWVudFxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG4gIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuXHJcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICBjYXJkSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuXHJcbiAgbGlrZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7bGlrZUluYWN0aXZlfSlgO1xyXG4gIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9KTtcclxuXHJcbiAgZGVsZXRlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtkZWxldGVJY29ufSlgO1xyXG4gIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2FyZEVsZW1lbnQucmVtb3ZlKCkpO1xyXG5cclxuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnN0IG1vZGFsSW1hZ2UgPSBpbWFnZVByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IG1vZGFsQ2FwdGlvbiA9IGltYWdlUHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XHJcbiAgICBtb2RhbEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIG1vZGFsSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgbW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgb3Blbk1vZGFsKGltYWdlUHJldmlld01vZGFsKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vLyBSZW5kZXIgaW5pdGlhbCBjYXJkc1xyXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XHJcbiAgY2FyZHNMaXN0LmFwcGVuZChjYXJkRWxlbWVudCk7XHJcbn0pO1xyXG5cclxuLy8gRW5hYmxlIGZvcm0gdmFsaWRhdGlvblxyXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiZXJyb3JNc2dFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJyZXNldFZhbGlkYXRpb24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uRWxlbWVudCIsImZvckVhY2giLCJkb2N1bWVudCIsInNyYyIsImxvZ28iLCJhdmF0YXIiLCJwZW5jaWwiLCJwbHVzIiwiY2FyZHNMaXN0IiwiY2FyZFRlbXBsYXRlIiwiZWRpdFByb2ZpbGVNb2RhbCIsIm5ld1Bvc3RNb2RhbCIsImltYWdlUHJldmlld01vZGFsIiwiZWRpdFByb2ZpbGVCdG4iLCJlZGl0UHJvZmlsZUNsb3NlQnRuIiwicHJvZmlsZUZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsIm5ld1Bvc3RCdG4iLCJuZXdQb3N0Q2xvc2VCdG4iLCJuZXdQb3N0Rm9ybSIsImxpbmtJbnB1dCIsImNhcHRpb25JbnB1dCIsImltYWdlUHJldmlld0Nsb3NlQnRuIiwib3Blbk1vZGFsIiwibW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIm9wZW5lZE1vZGFsIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZEltYWdlIiwiY2FyZFRpdGxlIiwibGlrZUJ1dHRvbiIsImRlbGV0ZUJ1dHRvbiIsImxpbmsiLCJhbHQiLCJuYW1lIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJsaWtlSW5hY3RpdmUiLCJ0b2dnbGUiLCJkZWxldGVJY29uIiwibW9kYWxJbWFnZSIsIm1vZGFsQ2FwdGlvbiIsImNvbmZpZyIsInRhcmdldCIsImNvbnRhaW5zIiwiZm9ybSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJpbnB1dEVsZW1lbnQiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTXNnIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9